<svg id="vps-{{ vps.id }}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 {% if vps.status == 'forsale' %}445{% elif vps.status in ['sold', 'inactive'] %}270{% else %}340{% endif %}" width="640" height="{% if vps.status == 'forsale' %}445{% elif vps.status in ['sold', 'inactive'] %}270{% else %}340{% endif %}" style="min-width:500px;">
  <style>
    #vps-{{ vps.id }} .title {
      fill: {% if vps.status in ['sold', 'inactive'] %}#6b7280{% else %}#50d0ff{% endif %};
      font-size: 22px;
      font-family: 'JetBrains Mono', 'Courier New', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace;
      font-weight: bold;
    }
    #vps-{{ vps.id }} .label {
      fill: {% if vps.status in ['sold', 'inactive'] %}#6b7280{% else %}#4afc90{% endif %};
      font-size: 16px;
      font-family: 'JetBrains Mono', 'Courier New', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace;
    }
    #vps-{{ vps.id }} .footer {
      fill: #888;
      font-size: 14px;
      font-family: 'JetBrains Mono', 'Courier New', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace;
    }
    #vps-{{ vps.id }} .card-bg {
      fill: #0c0f17;
      stroke: #3cffb5;
      stroke-width: 1;
    }
  </style>

  <rect width="100%" height="100%" class="card-bg" rx="12" ry="12" />
  {% if vps.status == 'forsale' %}
  <g>
    <rect x="450" y="20" rx="6" ry="6" width="160" height="32" fill="#facc15" />
    <text x="460" y="42" font-size="16" font-family="'JetBrains Mono', 'Courier New', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace" fill="white" font-weight="bold">待出售{% if vps.sale_method %} - {{ vps.sale_method }}{% endif %}</text>
  </g>
  {% elif vps.status == 'sold' %}
  <g>
    <rect x="500" y="20" rx="6" ry="6" width="110" height="32" fill="#6b7280" />
    <text x="510" y="42" font-size="16" font-family="'JetBrains Mono', 'Courier New', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace" fill="white" font-weight="bold">已转让</text>
  </g>
  {% elif vps.status == 'inactive' %}
  <g>
    <rect x="500" y="20" rx="6" ry="6" width="110" height="32" fill="#6b7280" />
    <text x="510" y="42" font-size="16" font-family="'JetBrains Mono', 'Courier New', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace" fill="white" font-weight="bold">已停用</text>
  </g>
  {% endif %}
  <text x="30" y="50" class="title">{{ vps.name }}</text>

  <text x="30" y="90" class="label">商家</text>
  <text x="120" y="90" class="label">：</text>
  <text x="140" y="90" class="label">{{ vps.vendor_name or '-' }}</text>

  <text x="30" y="115" class="label">配置</text>
  <text x="120" y="115" class="label">：</text>
  <text x="140" y="115" class="label">{{ specs.cpu }} / {{ specs.memory }} / {{ specs.storage }}</text>

  <text x="30" y="140" class="label">IP 地址</text>
  <text x="120" y="140" class="label">：</text>
  <image x="140" y="125" width="20" height="20" href="{{ ip_info.flag|twemoji_url }}" />
  <text x="170" y="140" class="label">{{ ip_info.ip_display }}</text>

  {% if vps.status in ['sold', 'inactive'] %}
  <text x="30" y="165" class="label">续费金额</text>
  <text x="120" y="165" class="label">：</text>
  <text x="140" y="165" class="label">{{ vps.renewal_price }} {{ vps.currency }}</text>

  <text x="360" y="165" class="label">更新时间</text>
  <text x="450" y="165" class="label">：</text>
  <text x="470" y="165" class="label">{{ today.strftime('%Y/%m/%d') }}</text>

  <text x="30" y="190" class="label">续费周期</text>
  <text x="120" y="190" class="label">：</text>
  <text x="140" y="190" class="label">{% if vps.renewal_days == 30 %}每月{% elif vps.renewal_days == 90 %}每季度{% elif vps.renewal_days == 365 %}每年{% elif vps.renewal_days == 1095 %}三年{% elif vps.renewal_days %}{{ vps.renewal_days }}天{% else %}-{% endif %}</text>

  <text x="360" y="190" class="label">NodeSeekID</text>
  <text x="480" y="190" class="label">：</text>
  <text x="500" y="190" class="label">{{ config.username if config and config.username else '' }}</text>
  {% else %}
  <text x="30" y="165" class="label">在线状态</text>
  <text x="120" y="165" class="label">：</text>
  <text x="140" y="165" class="label">{{ ip_info.ping_status }}</text>

  <text x="30" y="190" class="label">续费金额</text>
  <text x="120" y="190" class="label">：</text>
  <text x="140" y="190" class="label">{{ vps.renewal_price }} {{ vps.currency }}</text>

  <text x="30" y="215" class="label">续费周期</text>
  <text x="120" y="215" class="label">：</text>
  <text x="140" y="215" class="label">{% if vps.renewal_days == 30 %}每月{% elif vps.renewal_days == 90 %}每季度{% elif vps.renewal_days == 365 %}每年{% elif vps.renewal_days == 1095 %}三年{% elif vps.renewal_days %}{{ vps.renewal_days }}天{% else %}-{% endif %}</text>

  <text x="30" y="240" class="label">购买日期</text>
  <text x="120" y="240" class="label">：</text>
  <text x="140" y="240" class="label">{{ vps.purchase_date.strftime('%Y/%m/%d') if vps.purchase_date else '-' }}</text>

  <text x="30" y="265" class="label">剩余天数</text>
  <text x="120" y="265" class="label">：</text>
  <text x="140" y="265" class="label">{{ data.remaining_days }}</text>

  <text x="30" y="290" class="label">剩余价值</text>
  <text x="120" y="290" class="label">：</text>
  <text x="140" y="290" class="label">{{ data.remaining_value }} 元</text>

  {% if vps.status == 'forsale' %}
  <text x="30" y="315" class="label">转让溢价</text>
  <text x="120" y="315" class="label">：</text>
  <text x="140" y="315" class="label">{{ vps.sale_percent }}%</text>

  <text x="30" y="340" class="label">固定溢价</text>
  <text x="120" y="340" class="label">：</text>
  <text x="140" y="340" class="label">{{ vps.sale_fixed }} 元</text>

  <text x="30" y="365" class="label">Push 费用</text>
  <text x="120" y="365" class="label">：</text>
  <text x="140" y="365" class="label">{{ data.push_fee_cny }} 元</text>

  <text x="30" y="390" class="label">最终价格</text>
  <text x="120" y="390" class="label">：</text>
  <text x="140" y="390" class="label">{{ data.final_price }} 元</text>

  <text x="610" y="365" class="footer" text-anchor="end">更新时间: {{ today.strftime('%Y/%m/%d') }}</text>
  <text x="610" y="390" class="footer" text-anchor="end">NodeSeekID: {{ config.username if config and config.username else '' }}</text>
  {% elif vps.status in ['sold', 'inactive'] %}
  <text x="610" y="215" class="footer" text-anchor="end">更新时间: {{ today.strftime('%Y/%m/%d') }}</text>
  <text x="610" y="240" class="footer" text-anchor="end">NodeSeekID: {{ config.username if config and config.username else '' }}</text>
  {% else %}
  <text x="610" y="265" class="footer" text-anchor="end">更新时间: {{ today.strftime('%Y/%m/%d') }}</text>
  <text x="610" y="290" class="footer" text-anchor="end">NodeSeekID: {{ config.username if config and config.username else '' }}</text>
  {% endif %}
  {% endif %}
</svg>
